= Erstellen einer Updatesite und Veröffentlichen des Repositories

Um in anderen Repositories mit Klassen der Core-Anwendung arbeiten zu können muss dieses Repo in Targetplatformen aufgenommen werden können. 
Um dies zu ermöglichen wird eine Updatesite genutzt. 
Für die Core Anwendung ist diese link:https://github.com/minova-afis/aero.minova.rcp.updatesite[aero.minova.rcp.updatesite].

== Erstellen der Updatesite

Die Updatesite wird als neues Repositorie angelegt.
Unter `Settings` -> Pages kann der `main`-Branch zum Veröffentlichen ausgewählt werden.
Der Inhalt des Repositories wird nun Veröffentlicht, sobald auf `main` gepushed wird.
Weitere Info in der link:https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site[Doku von Github]

image::images/updatesitePages.png[] 

== Veröffentlichen des Repositories

Aktuell müssen wir per Hand auf die Updatesite Pushen.
Dafür wird einfach der Inhalt des Ordners `/aero.minova.rcp/releng/aero.minova.rcp.update/target/repository/` in den root-Ordner des Updatesite-Repositories kopiert.


TODO: Automation
siehe auch link:http://www.lorenzobettini.it/2021/03/publishing-an-eclipse-p2-composite-repository-on-github-pages/[Publishing an Eclipse p2 composite repository on GitHub Pages].



== Konfiguration des Core-Projekts

Damit unsere Anwendung Veröffentlicht werden kann haben wir eine Datei `releng/aero.minova.rcp.update/category.xml`, die unsere Features als Einträge enthält:

[source,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<site>
   <feature id="aero.minova.rcp.feature">
      <category name="rcpcore"/>
   </feature>
   <feature id="aero.minova.libs.feature">
      <category name="rcpcore"/>
   </feature>
   <category-def name="rcpcore" label="Core RCP Application"/>
</site>
----

== Einbinden in Target-Platformen

Die Updatesite kann über die URL link:https://minova-afis.github.io/aero.minova.rcp.updatesite/[https://minova-afis.github.io/aero.minova.rcp.updatesite/] 
in eine beliebige Targetplatform eingebunden werden.

image:images/updatesiteTarget.png[]

Tipp: Eclipse cached den Inhalt von Softwareseiten. Sollte eine Änderung an der Updatesite nicht in der Targetplatform auftauchen kann ein Neustart von Eclipse helfen.
