= Tastur Navigation

== Tab- und Enter-Verhalten

Bei der Umsetzung des Tab-Verhaltens verwenden wir das Verhalten, dass Eclipse schon standardmäßig implementiert hat. Das Enter-Verhalten wird in einem Handler mit Key Binding umgesetzt. 
Wir haben uns aus folgenden Gründen gegen den TraverseListener entschieden:

- Wir möchten dem Benutzer ein für Ihn gewohntes Verhalten bieten. Er soll sich nicht umgewöhnen und es trägt zu einer einfacheren Bedienung der Anwendung bei.
- Es ist weniger Code für uns zum pflegen. Der Code wird durch Eclipse aktuell gehalten.
- Die Funktionalität des Verhaltens ist vielseitiger einsetzbar, da sie nicht an eine Klasse gebunden ist. Zum Beispiel, durch die Umsetzung des
Enter Verhaltens in einem Handler, können wir diesen von verschiedenen Stellen in der Anwendung aufrufen.

=== Preferences die das Tab- und Enter-Verhalten beeinflussen

EnterSelectsFirstRequired (ESFR) = Genau Beschreibung hier: xref:application.adoc#Nach dem Betätigen von ENTER wird das erste erforderliche Feld selektiert[EnterSelectsFirstRequired]

LookupEnterSelectsNextRequired (LESNR) = Genau Beschreibung hier: xref:application.adoc#Das Betätigen von Enter in einer Auswahlbox bewirkt die Übernahme des ausgewählten Wertes. Nach der Übernahme wird das nächste erforderliche Feld selektiert[LookupEnterSelectsNextRequired]

SelectAllControls (SAC) = Genau Beschreibung hier: xref:application.adoc#Aktiviert die Selektion aller möglichen Felder inkl. Registerkarte und Schaltflächen[SelectAllControls]

=== Tab-Verhalten

Da das Tab-Verhalten durch Eclipse vorgegeben ist, müssen wir nur noch die Tab-Reihenfolge bestimmen. Folgende Bedingungen gelten für die Tab-Reihenfolge:

- Dabei werden in den Sections nur die Felder in die Tab Liste hinzugefügt, die nicht Read Only sind.
- Wenn die Preference SelectAllControls gesetzt ist werden die Controls des Detail Parts ebenfalls der Tab-Reihenfolge hinzugefügt. Dies ermöglicht die Selektion der Toolbar und der Sections.

Verhalten für die Eingabe von Tab:

|===
| *Eingabe* | *Verhalten*
| Tab | Benutzer springt ins nächste Feld.
| Shift + Tab | Benutzer springt ins vorherige Feld.
| Tab + SAC / Shift + Tab + SAC   = true | Beim Wechseln der Section/Page wird die Registerkarte der Section/Page selektiert
| Tab + SAC/ Shift + Tab + SAC  = false | Beim Wechseln der Section/Page wird die Registerkarte der Section/Page nicht selektiert
|===

Mit Tab verlässt man nie den ausgewählten Part. Wenn der Benutzer im letzten Feld Tab betätigt und SAC = false ist, wird das erste Feld im Part selektiert. Bei SAC = true wird das Label des Parts selektiert. Umgekehrt gilt das selbe. Wenn sich der Benutzer im erste Feld befindet und Shift + Tab 
betätigt, wird bei SAC = false das letzte Feld selektiert und bei SAC = true die Toolbar des Parts. Nach der Toolbar folgt das Label und danach wird das letzte Feld selektiert.

=== Enter-Verhalten

Die Eingabe von Enter wird mit einem Key-Binding im DetailPart erkannt und führt daraufhin die entsprechenden Handler aus. Dabei wir wie anschließend beschrieben vorgegangen:

- In der execute Methode des TraverseEnterHandlers holen wir uns zuerst das selektierte Feld. Bei einem LookupField schließen wir, falls offen, das PopupMenu.
- Danach wird das nächste leere Pflichtfeld, mit leeren WrittenText, ermittelt.
- Wenn ein Feld gefunden wurde wird es fokussiert. Falls kein gefunden wurde, beleibt der Benutzer im gleichen Feld.
- Nach der Ermittlung wird geprüft, ob der SaveDetailHandler enabled ist.
- Bei True wird dieser direkt ausgeführt. Bei False wird nichts gemacht.

Festgelegtes Verhalten für die Eingabe von Enter:

|===
| *Eingabe* | *Verhalten*
| Enter | Benutzer springt ins nächste Pflichtfeld.
| Enter + ESFR = true | Der benutzer springt ins erste nicht ausgefüllte Pflichtfeld.
| Enter + ESFR = false | Der benutzer springt ins nächste Pflichtfeld.
|===

=== Spezifisches Verhalten bei Mac

Für Mac gilt folgendes spezifisches Verhalten:

- Beim Mac kann die Selektion von Schaltflächen in den Systemeinstellungen aktiviert werden. Dafür muss unter Kurzbefehle in den Tastatureinstellungen der Haken bei "Bewege den Fokus mittels Tastaturnavigation zu Steuerelementen" gesetzt sein.

image::images/mac_activate_button_selection.png[Aktivierung der Button Selektion unter Mac,550,300]

- Standardverhalten für die Eingaben von Tab und Enter mit Modifier im Text Feld:

*Tab + Modifier:*
|===
|Ctrl + Tab | Benutzer bleibt im Feld und es wird ein Tab erstellt
|Alt + Tab | Benutzer springt ins nächste Feld. Es wird kein Tab erstellt.
|Cmd + Tab | Unter den geöffneten Apps zur zuletzt verwendeten wechseln.
|===

*Enter + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Ctrl + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Alt + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Cmd + Enter | Benutzer bleibt im Feld es wird kein Zeilenumbruch erstellt, es kommt ein Fehlersound
|===

=== Spezifisches Verhalten bei Windows

Für Windows gilt folgendes spezifisches Verhalten:

- Standardverhalten für die Eingaben von Tab und Enter mit Modifier im Text Feld:

*Tab + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Strg + Tab | Benutzer bleibt im Feld und es wird ein Tab erstellt.
|Alt + Tab | Windows spezifisches Verhalten wechseln zur letzten Anwendung.
|Win + Tab | Windows spezifisches Verhalten Übersicht aller offenen Fenster.
|===

*Enter + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Strg + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Alt + Enter | Benutzer bleibt im Feld und es wird kein Zeilenumbruch erstellt
|Win + Enter | Benutzer bleibt im Feld und es wird kein Zeilenumbruch erstellt
|===

== Navigation zwischen Parts

=== Key-Bindings

*Key-Bindings Perspektiven*
|===
| *Eingabe* | *Verhalten*
| F1 | Help
| F3 | Load Data with MatchCode
| F4 | Die erste Zelle im SearchPart wird selektiert
| F5 | Der IndexPart wird aktualisiert
| F6 | Das erste Feld im DetailPart wird selektiert
|===

*Key-Bindings DetailPart*
|===
| *Eingabe* | *Verhalten*
| CR | Nächstes Pflichtfeld wird selektiert oder es wird gespeichert
| M1 + S | Speichern des aktuellen Datensatzes
| M1 + N | Detail leeren
| M1 + R | Letzte Änderungen zurücksetzen
| M1 + Q | Bearbeitung beenden
|===

*Key-Bindings SearchPart*
|===
| *Eingabe* | *Verhalten*
| M1 + R | Zurücksetzen (Reset)
| M1 + D | Zeile löschen (Delete)
| M1 + S | Suchkriterien speichern (Save)
| M1 + L | Suchkriterien laden (Load)
| SHIFT + M1 + R | Optimieren (Resize)
|===



