
= Tab- und Enter-Verhalten

Diese Dokumentation beschreibt das Verhalten bei der Eingabe von Tab und Enter im DetailPart.

Bei der Umsetzung des Tab-Verhaltens verwenden wir das Verhalten, dass Eclipse schon standardmäßig implementiert hat. Das Enter-Verhalten wird in einem Handler mit Key Binding umgesetzt. 
Wir haben uns aus folgenden Gründen gegen den TraverseListener entschieden:

- Wir möchten dem Benutzer ein für Ihn gewohntes Verhalten bieten. Er soll sich nicht umgewöhnen und es trägt zu einer einfacheren Bedienung der Anwendung bei.
- Es ist weniger Code für uns zum pflegen. Der Code wird durch Eclipse aktuell gehalten.
- Die Funktionalität des Verhaltens ist vielseitiger einsetzbar, da sie nicht an eine Klasse gebunden ist. Zum Beispiel, durch die Umsetzung des
Enter Verhaltens in einem Handler, können wir diesen von verschiedenen Stellen in der Anwendung aufrufen.

==== Preferences die das Tab- und Enter-Verhalten beeinflussen

EnterSelectsFirstRequired (ESFR) = Genau Beschreibung hier: xref:application.adoc#Nach dem Betätigen von ENTER wird das erste erforderliche Feld selektiert[EnterSelectsFirstRequired]

LookupEnterSelectsNextRequired (LESNR) = Genau Beschreibung hier: xref:application.adoc#Das Betätigen von Enter in einer Auswahlbox bewirkt die Übernahme des ausgewählten Wertes. Nach der Übernahme wird das nächste erforderliche Feld selektiert[LookupEnterSelectsNextRequired]

SelectAllControls (SAC) = Genau Beschreibung hier: xref:application.adoc#Aktiviert die Selektion aller möglichen Felder inkl. Registerkarte und Schaltflächen[SelectAllControls]

==== Tab-Verhalten

Da das Tab-Verhalten durch Eclipse vorgegeben ist, müssen wir nur noch die Tab-Reihenfolge bestimmen. Folgende Bedingungen gelten für die Tab-Reihenfolge:

- Dabei werden in den Sections nur die Felder in die Tab Liste hinzugefügt, die nicht Read Only sind.
- Wenn die Preference SelectAllControls gesetzt ist werden die Controls des Detail Parts ebenfalls der Tab-Reihenfolge hinzugefügt. Dies ermöglicht die Selektion der Toolbar und der Sections.

Verhalten für die Eingabe von Tab:

|===
| *Eingabe* | *Verhalten*
| Tab | Benutzer springt ins nächste Feld.
| Shift + Tab | Benutzer springt ins vorherige Feld.
| Tab + SAC / Shift + Tab + SAC   = true | Beim Wechseln der Section/Page wird die Registerkarte der Section/Page selektiert
| Tab + SAC/ Shift + Tab + SAC  = false | Beim Wechseln der Section/Page wird die Registerkarte der Section/Page nicht selektiert
|===

==== Enter-Verhalten

Die Eingabe von Enter wird mit einem Key-Binding im DetailPart erkannt und führt darauhin die entsprechenden Handler aus. Dabei wir wie anschließend beschrieben vorgegangen:
 
- Zuerst wird die CanExecute Methode des GetNextRequiredHandlers ausgeführt. Die CanExecute Methode prüft den DetailPart nach nicht ausgefüllten Pflichtfeldern. Wenn sie keine findet wird false zurückgeliefert. Wenn sie ein Pflichtfeld findet wird true zurückgegeben.
- Wenn CanExecute true zurückliefert wird die Execute Methode des Handlers ausgeführt. Diese ermittelt das nächste zu selektierende leere Pflichtfeld.
- Falls die CanExecute Methode des Handlers false zurückliefert, wird die CanExecute Methode des SaveHandlers ausgeführt. Dieser prüft die eingegebenen Werte der Pflichtfelder auf Richtigkeit. Wenn alle Werte richtig sind wird true zurückgegeben. 
Falls ein Wert nicht stimmt wird false zurück geliefert und das entsprechende Feld selektiert.
- Bei true wird darufhin die Execute Methode des SaveHandlers ausgeführt, der dann den Datensatz speichert.

Festgelegtes Verhalten für die Eingabe von Enter:

|===
| *Eingabe* | *Verhalten*
| Enter | Benutzer springt ins nächste Pflichtfeld.
| Enter + ESFR = true | Der benutzer springt ins erste nicht ausgefüllte Pflichtfeld.
| Enter + ESFR = false | Der benutzer springt ins nächste Pflichtfeld.
|===

==== Spezifisches Verhalten bei Mac

Für Mac gilt folgendes spezifisches Verhalten:

- Beim Mac kann die Selektion von Schaltflächen in den Systemeinstellungen aktiviert werden. Dafür muss unter Kurzbefehle in den Tastatureinstellungen der Haken bei "Bewege den Fokus mittels Tastaturnavigation zu Steuerelementen" gesetzt sein.

image::images/mac_activate_button_selection.png[Aktivierung der Button Selektion unter Mac,550,300]

- Standardverhalten für die Eingaben von Tab und Enter mit Modifier:

*Tab + Modifier:*
|===
|Ctrl + Tab | Benutzer bleibt im Feld und es wird keine Tab erstellt
|Alt + Tab | Benutzer bleibt im Feld und es wird eine Tab erstellt
|Cmd + Tab | Unter den geöffneten Apps zur zuletzt verwendeten wechseln.
|===

*Enter + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Ctrl + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Alt + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Cmd + Enter | Benutzer bleibt im Feld es wird kein Zeilenumbruch erstellt, es kommt ein Fehlersound
|===

==== Spezifisches Verhalten bei Windows

Für Windows gilt folgendes spezifisches Verhalten:

- Standardverhalten für die Eingaben von Tab und Enter mit Modifier in Text Feld:

*Tab + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Strg + Tab | Benutzer bleibt im Feld und es wird keine Tab erstellt.
|Alt + Tab | Windows spezifisches Verhalten wechseln zur letzten Anwendung.
|Win + Tab | Windows spezifisches Verhalten Übersicht aller offenen Fenster.
|===

*Enter + Modifier:*
|===
| *Eingabe* | *Verhalten*
|Strg + Enter | Benutzer bleibt im Feld und es wird ein Zeilenumbruch erstellt
|Alt + Enter | Benutzer bleibt im Feld und es wird kein Zeilenumbruch erstellt
|Win + Enter | Benutzer bleibt im Feld und es wird kein Zeilenumbruch erstellt
|===